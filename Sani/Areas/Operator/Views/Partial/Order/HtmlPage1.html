ï»¿<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Neshan Map Example (Leaflet)</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>

    <link href="https://static.neshan.org/sdk/leaflet/1.4.0/leaflet.css" rel="stylesheet" type="text/css">
    <script src="https://static.neshan.org/sdk/leaflet/1.4.0/leaflet.js" type="text/javascript"></script>
</head>
<body>
    <button type="button" id="btn">click</button>

    <input type="text" id="find" />

    <div id="map" style="width: 600px; height: 450px; background: #eee; border: 2px solid #aaa;"></div>

    <script type="text/javascript">
        var myMap = new L.Map('map', {
            key: 'web.HaN0rZtSg5UhQ5gakASSplCk8tCnjHI1Sv1juvcL',
            maptype: 'dreamy',
            poi: true,
            traffic: false,
            center: [36.3729149, 59.4783693],
            zoom: 14
        });

        var marker = null;
        myMap.on('click', function (e) {
            if (marker == null) {
                marker = L.marker(e.latlng);
                marker.addTo(myMap);
            }
            else {
                myMap.removeLayer(marker);
                marker = null;
            }
        });

        $("#btn").click(() => {
            debugger;
            let val = $("#find").val();
            let url = 'https://api.neshan.org/v1/search?term="' + val + '"&lat=35.699739&lng=51.338097';
            var myHeaders = new Headers();
            myHeaders.append('Api-Key', 'web.HaN0rZtSg5UhQ5gakASSplCk8tCnjHI1Sv1juvcL');
            fetch(url, {
                headers: myHeaders
            }).then(function (response) {
                debugger;
            });
            //myMap.panTo(new L.LatLng(35.737, 51.923));
        });
    </script>
</body>
</html>